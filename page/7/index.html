<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>小陈运维 - 小陈运维</title><meta name="author" content="chenby"><meta name="copyright" content="chenby"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="小陈运维">
<meta property="og:type" content="website">
<meta property="og:title" content="小陈运维">
<meta property="og:url" content="http://www.chenby.cn/page/7/index.html">
<meta property="og:site_name" content="小陈运维">
<meta property="og:description" content="小陈运维">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="chenby">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.chenby.cn/page/7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '小陈运维',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-09-12 22:25:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">139</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://www.oiox.cn/images/wallhaven-g7m7xe.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小陈运维</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">小陈运维</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/03/01/2022-03-01-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%8C%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" title="二进制安装Kubernetes，一键安装脚本"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-m9olo8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二进制安装Kubernetes，一键安装脚本"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/03/01/2022-03-01-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%8C%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" title="二进制安装Kubernetes，一键安装脚本">二进制安装Kubernetes，一键安装脚本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-01T02:53:00.000Z" title="发表于 2022-03-01 10:53:00">2022-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">背景，最近几天闲着研究Kubernetes，发现使用手动二进制安装会有些繁琐。经过突发奇想，就出现这个脚本。
声明，该脚本不及互联网上其他大佬的一件脚本，该脚本仅仅是突发奇想编写的，希望大佬不喜勿喷。
这个脚本执行环境比较苛刻，我写的这个脚本比较垃圾，还未能达到各种环境下都可以执行。  
当前脚本Kubernetes集群，以及lb负载均衡，需要在CentOS系统，执行脚本节点可以选择Ubuntu或者CentOS系统。  
当前脚本中引用的Kubernetes二进制包是v1.23.3




主机名称
IP地址
说明
软件



Master01
192.168.1.40
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nfs-client


Master02
192.168.1.41
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nf ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/26/2022-02-26-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.23.4/" title="二进制安装Kubernetes（k8s） v1.23.4"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-o3exq5.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二进制安装Kubernetes（k8s） v1.23.4"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/26/2022-02-26-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.23.4/" title="二进制安装Kubernetes（k8s） v1.23.4">二进制安装Kubernetes（k8s） v1.23.4</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-26T00:36:00.000Z" title="发表于 2022-02-26 08:36:00">2022-02-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">1.环境


主机名称
IP地址
说明
软件



Master01
192.168.1.30
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nfs-client


Master02
192.168.1.31
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nfs-client


Master03
192.168.1.32
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nfs-client


Node01
192.168.1.33
node节点
kubelet、kube-proxy、nfs-client


Node02
192.168.1.34
node节点
kubelet、kube-proxy、nfs ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/23/2022-02-23-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2keepalived%E7%9A%84HA%E7%8E%AF%E5%A2%83/" title="安装部署keepalived的HA环境"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-8o3g1y.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安装部署keepalived的HA环境"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/23/2022-02-23-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2keepalived%E7%9A%84HA%E7%8E%AF%E5%A2%83/" title="安装部署keepalived的HA环境">安装部署keepalived的HA环境</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-23T08:11:00.000Z" title="发表于 2022-02-23 16:11:00">2022-02-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
每一台配置下keepalived
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108#master01 配置：cat &gt;/etc/keepalived/keepalived.conf&lt;&lt;&quot;EOF&quot;! Configuration File for keepalivedglobal_defs &#123;   router_id LVS_DEVEL   script_user root   enable_script_security&#125;vrrp_script chk_apiserver &#123;   script &quot;/etc/keepalived/ch ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/15/2022-02-15-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.23.3/" title="二进制安装Kubernetes（k8s） v1.23.3"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-28x8pg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二进制安装Kubernetes（k8s） v1.23.3"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/15/2022-02-15-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.23.3/" title="二进制安装Kubernetes（k8s） v1.23.3">二进制安装Kubernetes（k8s） v1.23.3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-15T05:07:00.000Z" title="发表于 2022-02-15 13:07:00">2022-02-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">二进制安装Kubernetes（k8s） v1.23.3Kubernetes 开源不易，帮忙点个star，谢谢了
介绍kubernetes二进制安装
后续尽可能第一时间更新新版本文档，更新后内容在GitHub。
https://github.com/cby-chen/Kubernetes/
手动项目地址：https://github.com/cby-chen/Kubernetes
脚本项目地址：https://github.com/cby-chen/Binary_installation_of_Kubernetes
1.环境


主机名称
IP地址
说明
软件



Master01
192.168.1.76
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy、nfs-client


Master02
192.168.1.77
master节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、k ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/15/2022-02-15-CentOS%E5%AE%89%E8%A3%85%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1/" title="CentOS安装时钟同步服务"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-6o7md7.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CentOS安装时钟同步服务"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/15/2022-02-15-CentOS%E5%AE%89%E8%A3%85%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1/" title="CentOS安装时钟同步服务">CentOS安装时钟同步服务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-15T04:37:00.000Z" title="发表于 2022-02-15 12:37:00">2022-02-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
使用chrony用于时间同步
123456789101112131415161718yum install chrony -yvim /etc/chrony.confcat /etc/chrony.conf | grep -v  &quot;^#&quot; | grep -v &quot;^$&quot;pool ntp.aliyun.com iburstdriftfile /var/lib/chrony/driftmakestep 1.0 3rtcsyncallow 10.0.0.0/8local stratum 10keyfile /etc/chrony.keysleapsectz right/UTClogdir /var/log/chronysystemctl restart chronydsystemctl enable chronyd

客户端安装并配置
1234567891011121314yum install chrony -yvim /etc/chrony.confcat /etc/chrony.conf | grep -v  &quot;^#&quot; | g ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/11/2022-02-11-%E4%BD%BF%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85Docker/" title="使用二进制方式安装Docker"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-e76y7l.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用二进制方式安装Docker"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/11/2022-02-11-%E4%BD%BF%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85Docker/" title="使用二进制方式安装Docker">使用二进制方式安装Docker</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-11T01:59:00.000Z" title="发表于 2022-02-11 09:59:00">2022-02-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
长期使用安装工具进行安装docker，今天用二进制方式手动安装一下docker环境。
1234567891011121314151617181920212223242526272829303132333435二进制包下载地址：https://download.docker.com/linux/static/stable/x86_64/#解压tar xf docker-20.10.9.tgz #拷贝二进制文件cp docker/* /usr/bin/#创建containerd的service文件,并且启动cat &gt;/etc/systemd/system/containerd.service &lt;&lt;EOF[Unit]Description=containerd container runtimeDocumentation=https://containerd.ioAfter=network.target local-fs.target[Service]ExecStartPre=-/sbin/modprobe overlayExecStart=/usr/bin/contai ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/10/2022-02-10-Kubernetes%EF%BC%88K8S%EF%BC%89%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="Kubernetes（K8S）内核优化常用参数详解"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-8o3g1y.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes（K8S）内核优化常用参数详解"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/10/2022-02-10-Kubernetes%EF%BC%88K8S%EF%BC%89%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="Kubernetes（K8S）内核优化常用参数详解">Kubernetes（K8S）内核优化常用参数详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-10T09:22:00.000Z" title="发表于 2022-02-10 17:22:00">2022-02-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
1234567891011121314151617181920212223242526272829303132333435363738net.ipv4.tcp_keepalive_time=600net.ipv4.tcp_keepalive_intvl=30net.ipv4.tcp_keepalive_probes=10net.ipv6.conf.all.disable_ipv6=1net.ipv6.conf.default.disable_ipv6=1net.ipv6.conf.lo.disable_ipv6=1net.ipv4.neigh.default.gc_stale_time=120net.ipv4.conf.all.rp_filter=0 net.ipv4.conf.default.rp_filter=0net.ipv4.conf.default.arp_announce=2net.ipv4.conf.lo.arp_announce=2net.ipv4.conf.all.arp_announce=2net.ipv4.ip_local_port_range= 45001 6 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/08/2022-02-08-CentOS&amp;amp;RHEL%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/" title="CentOS&amp;amp;RHEL内核升级"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-3z72w9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CentOS&amp;amp;RHEL内核升级"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/08/2022-02-08-CentOS&amp;amp;RHEL%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/" title="CentOS&amp;amp;RHEL内核升级">CentOS&amp;amp;RHEL内核升级</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-07T18:16:00.000Z" title="发表于 2022-02-08 02:16:00">2022-02-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
在安装部署一些环境的时候，会要求内核版本的要求，可以通过YUM工具进行安装配置更高版本的内核，当然更新内核有风险，在操作之前慎重，严谨在生产环境操作！
安装源
1234# 为 RHEL-8或 CentOS-8配置源yum install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm# 为 RHEL-7 SL-7 或 CentOS-7 安装 ELRepo yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm

启用内核源，并安装  
123456# 查看可用安装包yum  --disablerepo=&quot;*&quot;  --enablerepo=&quot;elrepo-kernel&quot;  list  available# 安装最新的内核# 我这里选择的是稳定版kernel-ml   如需更新长期维护版本kernel-lt  yum  --enablerepo=elrepo-kernel  inst ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/14/2022-01-14-%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85_tcpdump_%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="网络抓包 tcpdump 使用指南"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-q2o1ol.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网络抓包 tcpdump 使用指南"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/14/2022-01-14-%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85_tcpdump_%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="网络抓包 tcpdump 使用指南">网络抓包 tcpdump 使用指南</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-14T05:59:52.000Z" title="发表于 2022-01-14 13:59:52">2022-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content"> 在网络问题的调试中，tcpdump应该说是一个必不可少的工具，和大部分linux下优秀工具一样，它的特点就是简单而强大。它是基于Unix系统的命令行式的数据包嗅探工具，可以抓取流动在网卡上的数据包。

监听所有网卡所有包
1tcpdump

监听指定网卡的包
1tcpdump -i ens18

监听指定IP的包
1tcpdump host 192.168.1.11

监听指定来源IP
1tcpdump src host 192.168.1.11

监听目标地址IP
1tcpdump dst host 192.168.1.11

监听指定端口
1tcpdump port 80

监听TCP
1tcpdump tcp

监听UDP
1tcpdump udp

监听192.168.1.11的tcp协议的80端口的数据包
1234567tcpdump tcp port 80 and src host 192.168.1.1111:59:07.836563 IP 192.168.1.11.39680 &gt; hello.http: Flags [.], ack 867022485, win ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/13/2022-01-13-%E2%80%8BKubeSphere%E7%A6%BB%E7%BA%BF%E6%97%A0%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/" title="​KubeSphere离线无网络环境部署"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-g7m7xe.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="​KubeSphere离线无网络环境部署"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/13/2022-01-13-%E2%80%8BKubeSphere%E7%A6%BB%E7%BA%BF%E6%97%A0%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/" title="​KubeSphere离线无网络环境部署">​KubeSphere离线无网络环境部署</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-13T01:16:10.000Z" title="发表于 2022-01-13 09:16:10">2022-01-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">KubeSphere离线无网络环境部署
KubeSphere 是 GitHub 上的一个开源项目，是成千上万名社区用户的聚集地。很多用户都在使用 KubeSphere 运行工作负载。对于在 Linux 上的安装，KubeSphere 既可以部署在云端，也可以部署在本地环境中，例如 AWS EC2、Azure VM 和裸机等。
KubeSphere 为用户提供轻量级安装程序 KubeKey（该程序支持安装 Kubernetes、KubeSphere 及相关插件），安装过程简单而友好。KubeKey 不仅能帮助用户在线创建集群，还能作为离线安装解决方案。

前期准备所需包123456789101112131415161718192021#前期准备所需包root@hello:~# wget https://github.com/kubesphere/kubekey/releases/download/v1.2.1/kubekey-v1.2.1-linux-amd64.tar.gzroot@hello:~# tar xvf kubekey-v1.2.1-linux-amd64.tar.gz r ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/#content-inner">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/#content-inner">14</a><a class="extend next" rel="next" href="/page/8/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">chenby</div><div class="author-info__description">小陈运维</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">139</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cby-chen"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/12/2022-09-12-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.25.0_IPv4_IPv6%E5%8F%8C%E6%A0%88/" title="二进制安装Kubernetes（k8s） v1.25.0 IPv4/IPv6双栈"><img src="https://www.oiox.cn/images/wallhaven-xlo73z.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二进制安装Kubernetes（k8s） v1.25.0 IPv4/IPv6双栈"/></a><div class="content"><a class="title" href="/2022/09/12/2022-09-12-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85Kubernetes%EF%BC%88k8s%EF%BC%89_v1.25.0_IPv4_IPv6%E5%8F%8C%E6%A0%88/" title="二进制安装Kubernetes（k8s） v1.25.0 IPv4/IPv6双栈">二进制安装Kubernetes（k8s） v1.25.0 IPv4/IPv6双栈</a><time datetime="2022-09-12T14:13:00.000Z" title="发表于 2022-09-12 22:13:00">2022-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/12/2022-09-12-%E5%9C%A8Kubernetes%E9%83%A8%E7%BD%B2GitLab/" title="在Kubernetes部署GitLab"><img src="https://www.oiox.cn/images/wallhaven-xlo73z.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Kubernetes部署GitLab"/></a><div class="content"><a class="title" href="/2022/09/12/2022-09-12-%E5%9C%A8Kubernetes%E9%83%A8%E7%BD%B2GitLab/" title="在Kubernetes部署GitLab">在Kubernetes部署GitLab</a><time datetime="2022-09-12T13:59:15.000Z" title="发表于 2022-09-12 21:59:15">2022-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/12/2022-09-12-kubernetes_%E5%AE%89%E8%A3%85cilium/" title="kubernetes 安装cilium"><img src="https://www.oiox.cn/images/wallhaven-wqov66.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kubernetes 安装cilium"/></a><div class="content"><a class="title" href="/2022/09/12/2022-09-12-kubernetes_%E5%AE%89%E8%A3%85cilium/" title="kubernetes 安装cilium">kubernetes 安装cilium</a><time datetime="2022-09-12T10:27:00.000Z" title="发表于 2022-09-12 18:27:00">2022-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/02/2022-09-02-Kubernetes_1.24_1.25_%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8docker%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8/" title="Kubernetes 1.24 1.25 集群使用docker作为容器"><img src="https://www.oiox.cn/images/wallhaven-e76y7l.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes 1.24 1.25 集群使用docker作为容器"/></a><div class="content"><a class="title" href="/2022/09/02/2022-09-02-Kubernetes_1.24_1.25_%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8docker%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8/" title="Kubernetes 1.24 1.25 集群使用docker作为容器">Kubernetes 1.24 1.25 集群使用docker作为容器</a><time datetime="2022-09-02T11:07:12.000Z" title="发表于 2022-09-02 19:07:12">2022-09-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/31/2022-08-31-%E5%AE%89%E8%A3%85Minikube%E5%B9%B6%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AAKubernetes%E7%8E%AF%E5%A2%83/" title="安装Minikube并启动一个Kubernetes环境"><img src="https://www.oiox.cn/images/wallhaven-3z72w9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安装Minikube并启动一个Kubernetes环境"/></a><div class="content"><a class="title" href="/2022/08/31/2022-08-31-%E5%AE%89%E8%A3%85Minikube%E5%B9%B6%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AAKubernetes%E7%8E%AF%E5%A2%83/" title="安装Minikube并启动一个Kubernetes环境">安装Minikube并启动一个Kubernetes环境</a><time datetime="2022-08-31T04:25:17.000Z" title="发表于 2022-08-31 12:25:17">2022-08-31</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"><span class="card-category-list-name">默认分类</span><span class="card-category-list-count">139</span></a></li>
            </ul></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">139</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-09-12T14:25:42.891Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://www.oiox.cn/images/wallhaven-g7m7xe.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By chenby</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = ["chenby"]
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>