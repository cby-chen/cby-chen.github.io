<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>小陈运维 - 小陈运维</title><meta name="author" content="chenby"><meta name="copyright" content="chenby"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="小陈运维，致力于Kubernetes（k8s）与传统运维技术博客文档分享。互相学习，互相进步。">
<meta property="og:type" content="website">
<meta property="og:title" content="小陈运维">
<meta property="og:url" content="http://www.chenby.cn/page/14/index.html">
<meta property="og:site_name" content="小陈运维">
<meta property="og:description" content="小陈运维，致力于Kubernetes（k8s）与传统运维技术博客文档分享。互相学习，互相进步。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.oiox.cn/1.jpg">
<meta property="article:author" content="chenby">
<meta property="article:tag" content="小陈运维,运维,linux,kubernetes,docker,k8s,容器,博客,文档,技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.oiox.cn/1.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.chenby.cn/page/14/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '小陈运维',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-11-28 12:10:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://www.oiox.cn/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">148</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://www.oiox.cn/images/wallhaven-l3dd1r.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小陈运维</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">小陈运维</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/12/30/bc672ebe88ec/" title="Prometheus+Grafana监控系统"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-q2k8yr.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Prometheus+Grafana监控系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/bc672ebe88ec/" title="Prometheus+Grafana监控系统">Prometheus+Grafana监控系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:03:00.000Z" title="发表于 2021-12-30 17:03:00">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">Prometheus vs Zabbix    Zabbix的客户端更多是只做上报的事情，push模式。而Prometheus则是客户端本地也会存储监控数据，服务端定时来拉取想要的数据。
 Zabbix的客户端agent可以比较方便的通过脚本来读取机器内数据库、日志等文件来做上报。zabbix的客户端agent可以比较方便的通过脚本来读取机器内数据库、日志等文件来做上报。Prometheus的上报客户端则分为不同语言的SDK和不同用途的exporter两种，比如如果你要监控机器状态、mysql性能等，有大量已经成熟的exporter来直接开箱使用，通过http通信来对服务端提供信息上报（server去pull信息）；
Zabbix’s client is more of only reporting things, push mode. In Prometheus, the client also stores monitoring data locally, and the server regularly pulls the desired data.
     Zabbix’s  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/12/30/359acb4eda3e/" title="Python安装-在Linux系统中使用编译进行安装"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-l3v8rl.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python安装-在Linux系统中使用编译进行安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/359acb4eda3e/" title="Python安装-在Linux系统中使用编译进行安装">Python安装-在Linux系统中使用编译进行安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:02:47.000Z" title="发表于 2021-12-30 17:02:47">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
Python安装-在Linux系统中使用编译进行安装  
你可以使用Ubuntu自带的Python3，不过你不能自由的控制版本，还要单独安装pip3，如果你想升级pip3，还会出现一些让人不愉快的使用问题。而在CentOS系统中，默认只有Python2，通过yum安装Python3，也同样面临版本落后以及pip3的问题。如果不自己编译安装，还有什么别的方法来一直保持使用最新的版本呢？！除非你用Win系统。
You can use the Python3 that comes with Ubuntu, but you can’t control the version freely. You have to install pip3 separately. If you want to upgrade pip3, there will be some unpleasant usage problems. In the CentOS system, there is only Python2 by default. Installing Python3 through yum also  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/12/30/3557d0549d9b/" title="从APNIC获取中国IP地址列表"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-72gzz3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从APNIC获取中国IP地址列表"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/3557d0549d9b/" title="从APNIC获取中国IP地址列表">从APNIC获取中国IP地址列表</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:02:22.000Z" title="发表于 2021-12-30 17:02:22">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
关于APNIC  
    全球IP地址块被IANA(Internet Assigned Numbers Authority)分配给全球三大地区性IP地址分配机构，它们分别是：
ARIN (American Registry for Internet Numbers)
    负责北美、南美、加勒比以及非洲撒哈啦部分的IP地址分配。同时还要给全球NSP(Network Service Providers)分配地址。
RIPE (Reseaux IP Europeens)
    负责欧洲、中东、北非、西亚部分地区(前苏联)
APNIC (Asia Pacific Network Information Center)
    负责亚洲、太平洋地区
APNIC IP地址分配信息总表的获取：
1APNIC提供了每日更新的亚太地区IPv4，IPv6，AS号分配的信息表：http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest

1该文件的格式与具体内容参见：ftp://ftp.apnic.net/pub/apnic/stat ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/12/30/cbba97b8fe4c/" title="服务器被入侵，异常进程无法杀掉，随机进程名"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-m9olo8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="服务器被入侵，异常进程无法杀掉，随机进程名"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/cbba97b8fe4c/" title="服务器被入侵，异常进程无法杀掉，随机进程名">服务器被入侵，异常进程无法杀掉，随机进程名</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:02:10.000Z" title="发表于 2021-12-30 17:02:10">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">故事情节：
    有一天在聚餐中，我有一个朋友和我说他的服务器上有有个异常的进程他一直在占满CPU在运行，我在一顿谦虚之后答应了他，有空登录上他的服务器看一下具体情况。  
      
    这一天正是五月一日，一年一度的劳动节来了，我在家里闲着没事干在看某综艺，这时手机响了，来了一条微信消息，看到他给我发来了俩张图，突然勾起了我内心的好奇。  



    就是以上三张图，在proc目录中的exe指向的文件已被删除，我看到这里，我好奇这个进程肯定是被隐藏掉了。这时，我急中生智跟这位朋友要了root账号密码。登录服务器用top命令一看，发现一个奇怪的进程在运行，我使用kill命令将其杀后，等了十来分钟后，发现没有被启动，这时我和这位朋友说干掉了，他问我是不是kill掉了，我说嗯，他又补充到，这个进程杀掉过段时间会起来的，我问他大概多久就会启动，他说不清楚大概一天内肯定会启动。这时我慌了，如果是一天内才启动，我还得明天才能看见，那实在没办法了。我又开始看我的综艺了。
    没过多久，我又看了一下，发现这个进程换了个名字又启动了。还干满了CPU，就在这时，我在研究这个进程运行文件 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/12/30/05fac96c296b/" title="华为人工智能atlasA800-9000物理服务器离线安装及CANN安装和MindSpore安装和Tensorflow安装"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-p8q3k9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="华为人工智能atlasA800-9000物理服务器离线安装及CANN安装和MindSpore安装和Tensorflow安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/05fac96c296b/" title="华为人工智能atlasA800-9000物理服务器离线安装及CANN安装和MindSpore安装和Tensorflow安装">华为人工智能atlasA800-9000物理服务器离线安装及CANN安装和MindSpore安装和Tensorflow安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:02:00.000Z" title="发表于 2021-12-30 17:02:00">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">目录
华为人工智能atlas A800-9000 物理服务器全程离线安装驱动以及CANN安装部署和MindSpore安装部署和Tensorflow安装部署
A800-9000 物理服务器安装驱动
使用镜像配置本地apt源
创建普通用户并设置密码
安装驱动以及固件
验证是否安装成功
CANN开发环境部署安装
安装环境以及依赖
安装完成后查看版本
安装Python3.7.5
使用Python3.7.5环境安装pip依赖包
安装开发套件包
CANN训练环境部署安装
说明
安装训练软件包
安装MindSpore
安装whl包
配置环境变量
测试是否可行
安装mindinsight
安装whl包
配置环境变量
启动及使用
安装Tensorflow
编译hdf5
配置环境变量及软连接
安装whl包
安装Pytorch
华为人工智能atlas A800-9000 物理服务器全程离线安装驱动以及CANN安装部署和MindSpore安装部署和Tensorflow安装部署
背景
Atlas 800 训练服务器（型号：9000）是基于华为鲲鹏920+昇腾910处理器的AI训练服务器，具有最强算力密度、超高能 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/12/30/26b3da076df8/" title="MINIO搭建单机以及集群"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-e79v1r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MINIO搭建单机以及集群"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/26b3da076df8/" title="MINIO搭建单机以及集群">MINIO搭建单机以及集群</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:01:58.000Z" title="发表于 2021-12-30 17:01:58">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
MINIO简介
    Minio是Apache License v2.0下发布的对象存储服务器。它与Amazon S3云存储服务兼容。它最适合存储非结构化数据，如照片，视频，日志文件，备份和容器&#x2F;VM映像。对象的大小可以从几KB到最大5TB。Minio服务器足够轻，可以与应用程序堆栈捆绑在一起，类似于NodeJS，Redis和MySQL。
      https://docs.minio.io/
一、单机版搭建  
操作系统搭建方式LinuxdockerLinux宿主机

  

1. docker模式搭建
1.1安装docker
12345curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun[root@localhost ~]# systemctl start docker #启动docker[root@localhost ~]# docker ps -a #查看一下命令是否可以执行CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/12/30/05e9ea42e684/" title="Linux文件系统故障，Input/output error"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-m9olo8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux文件系统故障，Input/output error"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/05e9ea42e684/" title="Linux文件系统故障，Input/output error">Linux文件系统故障，Input/output error</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:01:23.000Z" title="发表于 2021-12-30 17:01:23">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">
    事情是这样的，在启动某一个应用程序的时候，出现 Input&#x2F;output error 的报错，磁盘以及目录无法使用的情况下，进行了重启，重启完成后是可以正常使用的，过一段时间后就会再次出现这个问题，一番Google之后怀疑是磁盘出现问题，根据网友的解决方案尝试之后发现，这个方法可行，下文是命令及回显：
      
    使用ls命令查看的时候出现这个报错  
123[root@webc ~]# ls /data/ls: 无法访问/data/: 输入/输出错误[root@webc ~]#

    这个是xfs的文件系统，所以使用如下命令进行修复  
12[root@webc ~]# xfs_repair /dev/sdc1xfs_repair: cannot open /dev/sdc1: 设备或资源忙

   
      
    这时这个问题，不要慌，先把磁盘卸载了在进行修复  
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/12/30/73a830da4a35/" title="华为 A800-9000 服务器 离线安装MindX DL"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-q2k2w7.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="华为 A800-9000 服务器 离线安装MindX DL"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/73a830da4a35/" title="华为 A800-9000 服务器 离线安装MindX DL">华为 A800-9000 服务器 离线安装MindX DL</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:01:10.000Z" title="发表于 2021-12-30 17:01:10">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">    MindX DL（昇腾深度学习组件）是支持 Atlas 800 训练服务器、Atlas 800 推理服务器的深度学习组件参考设计，提供昇腾 AI 处理器资源管理和监控、昇腾 AI 处理器优化调度、分布式训练集合通信配置生成等基础功能，快速使能合作伙伴进行深度学习平台开发。

    操作系统使用的是Ubuntu-1804，CPU是华为自研ARM架构。

一、安装前准备

配置apt网络源

123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960hello@ubuntu:/etc/apt$ sudo cp sources.list~ sources.listhello@ubuntu:/etc/apt$ cat sources.list# # deb cdrom:[Ubuntu-Server 18.04.5 LTS _Bionic Beaver_ - Release arm64 (20200810)]/ bionic ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/12/30/f5a29ce22688/" title="Proxmox VE镜像分析与定制"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-q2k8yr.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Proxmox VE镜像分析与定制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/f5a29ce22688/" title="Proxmox VE镜像分析与定制">Proxmox VE镜像分析与定制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:01:00.000Z" title="发表于 2021-12-30 17:01:00">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">    Proxmox VE（Proxmox Virtual Environment，简称PVE）是一个开源的服务器虚拟化环境Linux发行版，基于Debian，使用给予Ubuntu的定制内核。相比于其他虚拟化平台，PVE具有的一个显著的特点就是无需master节点，安装完成后，无需特殊配置即可将多个节点组成集群。
由于工程要求，PVE需要大规模部署在物理服务器上，所以定制镜像就显得很有必要。
定制目标包括
（1）修改initrd中init脚本的提示信息
（2）删除GRUB界面多余选项，直接进入安装界面
（3）添加预装软件
（4）在安装过程中对软件进行个性化配置
（5）修改PVE安装界面，在PVE安装界面中的所有输入框设置默认文本
Proxmox VE镜像分析
下载Proxmox VE 6.4版镜像后挂载，观察文件结构
&#96;&#96;&#96;shell$ tree -L 2.├── boot│   ├── boot.cat│   ├── grub│   ├── initrd.img│   ├── linux26│   └── memtest86+.bin├── COPYING├ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/12/30/004f2f4b0d8f/" title="人工智能NVIDIA显卡计算（CUDA+CUDNN）平台搭建"><img class="post_bg" src="https://www.oiox.cn/images/wallhaven-q2k2w7.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="人工智能NVIDIA显卡计算（CUDA+CUDNN）平台搭建"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/30/004f2f4b0d8f/" title="人工智能NVIDIA显卡计算（CUDA+CUDNN）平台搭建">人工智能NVIDIA显卡计算（CUDA+CUDNN）平台搭建</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-30T09:01:00.000Z" title="发表于 2021-12-30 17:01:00">2021-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></span></div><div class="content">    NVIDIA是GPU（图形处理器）的发明者，也是人工智能计算的引领者。我们创建了世界上最大的游戏平台和世界上最快的超级计算机。
      

    第一步，首先安装N卡驱动。  
&#96;&#96;&#96;shellcby@cby-Inspiron-7577:~$ sudo add-apt-repository ppa:graphics-drivers&#x2F;ppa[sudo] cby 的密码：PPA publishes dbgsym, you may need to include ‘main&#x2F;debug’ componentRepository: ‘deb http://ppa.launchpad.net/graphics-drivers/ppa/ubuntu/ hirsute main’Description:Fresh drivers from upstream, currently shipping Nvidia.
Current StatusCurrent long-lived branch release: nvidia-430 (430.4 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/13/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/#content-inner">15</a><a class="extend next" rel="next" href="/page/15/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://www.oiox.cn/1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">chenby</div><div class="author-info__description">小陈运维，致力于Kubernetes（k8s）与传统运维技术博客文档分享。互相学习，互相进步。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">148</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/27/95aa82e98174/" title="镜像搬运工 skopeo"><img src="https://www.oiox.cn/images/wallhaven-l3xoor.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="镜像搬运工 skopeo"/></a><div class="content"><a class="title" href="/2022/11/27/95aa82e98174/" title="镜像搬运工 skopeo">镜像搬运工 skopeo</a><time datetime="2022-11-27T13:38:50.000Z" title="发表于 2022-11-27 21:38:50">2022-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/23/376987efd3b7/" title="在k8s上安装Harbor"><img src="https://www.oiox.cn/images/wallhaven-e76y7l.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在k8s上安装Harbor"/></a><div class="content"><a class="title" href="/2022/11/23/376987efd3b7/" title="在k8s上安装Harbor">在k8s上安装Harbor</a><time datetime="2022-11-22T16:21:49.000Z" title="发表于 2022-11-23 00:21:49">2022-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/16/d9240dc51b85/" title="安装Harbor"><img src="https://www.oiox.cn/images/wallhaven-72g2qo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安装Harbor"/></a><div class="content"><a class="title" href="/2022/11/16/d9240dc51b85/" title="安装Harbor">安装Harbor</a><time datetime="2022-11-16T07:18:03.000Z" title="发表于 2022-11-16 15:18:03">2022-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/12/752114e7fe6b/" title="Grafana Prometheus Altermanager"><img src="https://www.oiox.cn/images/wallhaven-72gzz3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grafana Prometheus Altermanager"/></a><div class="content"><a class="title" href="/2022/11/12/752114e7fe6b/" title="Grafana Prometheus Altermanager">Grafana Prometheus Altermanager</a><time datetime="2022-11-12T03:59:09.000Z" title="发表于 2022-11-12 11:59:09">2022-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/09/05f3ddcc5772/" title="在Ubuntu中安装Samba文件服务"><img src="https://www.oiox.cn/images/wallhaven-l3xoor.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Ubuntu中安装Samba文件服务"/></a><div class="content"><a class="title" href="/2022/11/09/05f3ddcc5772/" title="在Ubuntu中安装Samba文件服务">在Ubuntu中安装Samba文件服务</a><time datetime="2022-11-09T10:48:03.000Z" title="发表于 2022-11-09 18:48:03">2022-11-09</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"><span class="card-category-list-name">默认分类</span><span class="card-category-list-count">148</span></a></li>
            </ul></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">14</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">148</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-11-28T04:10:18.209Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By chenby</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>